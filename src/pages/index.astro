---
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogPost from "../components/BlogPost.astro";
import AudioshowPost from "../components/AudioshowPost.astro";

const notesPosts = (await Astro.glob("./posts/yeahscience/*.md"))
	.sort((a, b) => new Date(b.frontmatter.pubDate).getTime() - new Date(a.frontmatter.pubDate).getTime())
	.slice(0, 4);

const projectPosts = (await Astro.glob("./posts/projects/*.md"))
	.sort((a, b) => new Date(b.frontmatter.pubDate).getTime() - new Date(a.frontmatter.pubDate).getTime())
	.slice(0, 4);

const audioshowEpisodes = (await Astro.glob("./posts/audioshow/*.md"))
	.sort((a, b) => new Date(b.frontmatter.pubDate).getTime() - new Date(a.frontmatter.pubDate).getTime());
const latestAudioshow = audioshowEpisodes[0];
const supportingEpisodes = audioshowEpisodes.slice(1, 3);

const photoStories = [
	{
		title: "Neon Alley, Shenzhen",
		context: "800T Â· humid summer",
		description: "Chasing cyan reflections with a compact camera and a single roll.",
		palette: ["#06141b", "#f97316"],
	},
	{
		title: "Library Silence",
		context: "Tri-X Â· afternoon grain",
		description: "Documenting the academic half of life â€” notebooks, coffee rings, quiet light.",
		palette: ["#0f172a", "#94a3b8"],
	},
	{
		title: "Desert Radio",
		context: "Portra Â· roadtrip loop",
		description: "Music research meets photography: abandoned antennas, long exposure skies.",
		palette: ["#1d1a31", "#fba834"],
	},
];

const focusSignals = [
	"Statistical thinking applied to multimodal AIGC + audio.",
	"Better note-taking systems for bilingual writing.",
	"Compact-camera workflows with fast publishing.",
];

const nowSignals = [
	{
		title: "From Zero",
		context: "Linkin Park Â· demo reels",
	},
	{
		title: "American Beauty",
		context: "Grateful Dead Â· acoustic focus",
	},
	{
		title: "Use Your Illusion I",
		context: "Guns N' Roses Â· maximal guitars",
	},
];

const headTitle = "Audiofool";
const pageTitle = "Audiofool Studio";
const description = "Projects, notes, photography, and Audioshow logs from Audiofool.";
const formatDate = (value) =>
	new Date(value).toLocaleDateString("en", {
		month: "short",
		day: "numeric",
		year: "numeric",
	});
---

<BaseLayout headTitle={headTitle} pageTitle={pageTitle} hideHeading={true} description={description}>
	<section class="hero">
		<p class="eyebrow">Reboot Â· 2024</p>
		<h1>æç®€åˆè¿…æ·çš„ä¸ªäººå®éªŒå®¤ â€” å†™ä½œã€æ‘„å½±ä¸å£°éŸ³ã€‚</h1>
		<p class="lede">
			Hello, I'm Audiofool. This is the control room for my projects, study notes, camera rolls, and Audioshow episodes â€” minimal surfaces, intentional stories.
		</p>
		<div class="meta-line">
			<span>ğŸ“ projects first</span>
			<span>ğŸ“ notes and collections</span>
			<span>ğŸ“· roaming cameras</span>
			<span>ğŸ§ weekly audioshow</span>
		</div>
	</section>

	<section>
		<div class="section-header">
			<p class="eyebrow">Projects</p>
			<h2>Shipping-focused experiments</h2>
			<p class="muted">Research tools, AI4Music prototypes, and long-form build logs.</p>
		</div>
		<ul class="list-reset grid-auto">
			{projectPosts.map((post) => (
				<BlogPost
					url={post.url}
					title={post.frontmatter.title}
					description={post.frontmatter.description}
					meta={`${post.frontmatter.status ?? ""}`}
				/>
			))}
		</ul>
		<a class="cta-link" href="/projects/">Browse every project â†—</a>
	</section>

	<section>
		<div class="section-header">
			<p class="eyebrow">Notes</p>
			<h2>Rigorous study logs</h2>
			<p class="muted">Lecture reflections, paper clubs, and bilingual study notes.</p>
		</div>
		<ul class="list-reset column-list">
			{notesPosts.map((post) => (
				<BlogPost
					url={post.url}
					title={post.frontmatter.title}
					description={post.frontmatter.description}
					meta={formatDate(post.frontmatter.pubDate)}
					tags={post.frontmatter.tags}
				/>
			))}
		</ul>
		<a class="cta-link" href="/alog/">Open the notes library â†—</a>
	</section>

	<section>
		<div class="section-header">
			<p class="eyebrow">Photography</p>
			<h2>Field notes in light</h2>
			<p class="muted">Visual logs that pair film/digital captures with research days.</p>
		</div>
		<div class="photo-track">
			{photoStories.map((story) => (
				<div class="photo-card surface-card" style={`background: radial-gradient(circle at top, ${story.palette[1]}22, transparent), ${story.palette[0]};`}>
					<p class="pill">{story.context}</p>
					<h3>{story.title}</h3>
					<p>{story.description}</p>
				</div>
			))}
		</div>
		<a class="cta-link" href="/photography/">View photography plans â†—</a>
	</section>

	<section>
		<div class="section-header">
			<p class="eyebrow">Audioshow</p>
			<h2>Latest broadcast + archive</h2>
			<p class="muted">One PNG poster, six tracks, and a lyric per episode.</p>
		</div>
		<div class="audioshow-stack">
			{latestAudioshow && (
				<article class="latest-audio surface-card">
					<p class="pill">New</p>
					<h3>{latestAudioshow.frontmatter.title}</h3>
					<p class="muted">EP {latestAudioshow.frontmatter.episode}</p>
					<p>{latestAudioshow.frontmatter.description ?? "Fresh pull from the midnight queue."}</p>
					<a class="cta-link" href={latestAudioshow.url}>Play this episode â†—</a>
				</article>
			)}
			<ul class="list-reset grid-auto">
				{supportingEpisodes.map((post) => (
					<AudioshowPost
						url={post.url}
						episode={post.frontmatter.episode}
						pubDate={post.frontmatter.pubDate}
						title={post.frontmatter.title}
					/>
				))}
			</ul>
		</div>
		<a class="cta-link" href="/audioshow/">Full Audioshow archive â†—</a>
	</section>

	<section class="two-col signals">
		<div>
			<p class="eyebrow">Focus</p>
			<ul class="list-reset focus-list">
				{focusSignals.map((item) => (
					<li>{item}</li>
				))}
			</ul>
		</div>
		<div>
			<p class="eyebrow">Now</p>
			<ul class="list-reset now-list">
				{nowSignals.map((entry) => (
					<li>
						<strong>{entry.title}</strong>
						<p class="muted">{entry.context}</p>
					</li>
				))}
			</ul>
		</div>
	</section>

	<section class="stay-updated">
		<p class="eyebrow">Stay Updated</p>
		<p class="muted">
			Grab the <a href="/rss.xml">RSS feed</a>, drop by <a href="/about/">about</a> for contact, or ping me on social if you prefer short updates.
		</p>
	</section>
</BaseLayout>

<style>
	.hero {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	.section-header {
		margin-bottom: 1rem;
	}

	.cta-link {
		display: inline-flex;
		margin-top: 1rem;
		font-weight: 600;
		color: var(--accent);
		text-decoration: none;
		align-items: center;
		gap: 0.35rem;
	}

	.cta-link:hover {
		text-decoration: underline;
	}

	.column-list li + li {
		margin-top: 0.6rem;
	}

	.photo-track {
		display: grid;
		gap: 1rem;
		grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
	}

	.photo-card {
		color: #f5f5f5;
		min-height: 220px;
		border: none;
		box-shadow: none;
	}

	.photo-card p {
		color: #fefefe;
	}

	.audioshow-stack {
		display: grid;
		gap: 1rem;
	}

	.latest-audio {
		padding: 1.6rem;
		display: flex;
		flex-direction: column;
		gap: 0.6rem;
	}

	.signals {
		align-items: flex-start;
	}

	.focus-list li,
	.now-list li {
		padding: 0.4rem 0;
		color: var(--text-secondary);
	}

	.now-list li {
		border-bottom: 1px solid var(--border-subtle);
	}

	.stay-updated {
		margin-top: 1rem;
		padding: 1.2rem;
		border: 1px dashed var(--border-subtle);
		border-radius: var(--radius-lg);
	}

	@media (max-width: 720px) {
		.photo-track {
			display: flex;
			gap: 0.8rem;
			overflow-x: auto;
			scroll-snap-type: x mandatory;
		}

		.photo-card {
			min-width: 240px;
			scroll-snap-align: start;
		}

		.audioshow-stack {
			grid-template-columns: 1fr;
		}
	}
</style>
