<button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
	<span class="icon sun" aria-hidden="true">☼</span>
	<span class="icon moon" aria-hidden="true">○</span>
</button>

<style>
	button {
		font-size: 1rem;
	}

	.icon {
		font-size: 0.95rem;
		display: none;
		color: var(--text-secondary);
	}

	.sun {
		display: inline-flex;
	}

	:global(.dark) .sun {
		display: none;
	}

	:global(.dark) .moon {
		display: inline-flex;
	}
</style>

<script is:inline>
	if (typeof window !== "undefined") {
		const element = document.documentElement;
		const storageKey = "theme";
		const prefersDark = window.matchMedia("(prefers-color-scheme: dark)");
		const storedTheme = localStorage.getItem(storageKey);
		const initialTheme = storedTheme ?? (prefersDark.matches ? "dark" : "light");

		element.classList.toggle("dark", initialTheme === "dark");

		const toggleButton = document.getElementById("themeToggle");
		const toggleTheme = () => {
			const isDark = element.classList.toggle("dark");
			localStorage.setItem(storageKey, isDark ? "dark" : "light");
		};

		toggleButton?.addEventListener("click", toggleTheme);
	}
</script>
